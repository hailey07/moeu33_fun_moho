## HS Shape 版本 10.20
发布日期：2023 年 9 月 8 日
此版本（自 2022 年 12 月发布的 10.00 版本以来）有哪些新内容？
10.01：修复了一些小错误。
10.10：更新以支持 Lua 5.4（适用于 Moho 14）。除此之外，与 10.00 版本相比，功能上没有其他变化。
10.11-10.14：修复了一些小错误。
10.20：新增子工具：马赛克

## 此版本可在 Moho 12 或更高版本上运行

这套工具是基于 Moho 自带的 SHAPE 工具开发的。
自动填充和自动描边功能均正常。
通常情况下，Shift 和 Alt 键的作用与标准形状工具相同。例外情况如下所述。

## 输入
子工具按钮左侧有一个“附加功能”按钮。点击此按钮可以改变子工具选择按钮的行为。
单击（或按住 Alt 键单击）按钮可在选项之间向前（或向后）循环切换：
>>> O – 子工具的正常运行
>>> R – 重置子工具的选项（并保持子工具处于活动状态）
>>> ? – 打印子工具“帮助/关于”消息（并保持子工具处于活动状态）

菜单栏中有 3 个数值输入框：两个整数输入框和一个浮点数输入框。输入的数据会根据所选工具的上下文而变化。每个子工具的每次调用都会保留输入的值。
超出限制范围的值将被重置，且不会显示任何错误消息。
请注意，如果选择的输入值会导致创建大量形状（例如，48x48 的正方形网格），则创建所有这些形状所需的时间会很长。（如果可能创建大量形状，则形状会在鼠标抬起时创建，而不是在鼠标按下时创建。）
有一个复选框可以强制所有绘制操作都在帧 0 上进行（与 Moho 13.5.3 及更高版本中的做法相同）。如果未选中此复选框，则会在活动帧上创建或修改形状。
此外，还有一个与上下文相关的选项按钮，可以根据当前激活的子工具提供更多选项。

## 编辑形状
使用子工具绘制形状后，可以通过以下方式更改形状的细节：（可选）更改数值输入字段（直接或间接定义形状点数的字段除外），然后按住 Ctrl 键并同时单击和拖动鼠标。编辑操作进行中后，如果不再需要修改形状，则可以松开 Ctrl 键。请注意，Shift 和 Alt 键的设置将保持不变，与创建形状时相同。
此外，当子工具使用浮点输入来控制缩放/比例/圆度（等）时，可以在绘制形状后立即修改此值以改变绘制的形状。
如果在第 0 帧创建了一个形状（例如，选中了“在第 0 帧创建”复选框），然后在不同的帧上修改了该形状（取消选中了“在第 0 帧创建”复选框），则该形状将具有动画效果。

## 子工具概要
圆形、扇形、椭圆形、圆角矩形
骨骼影响形状环状同心多边形
多边形三角/四边形网格直角三角形
星形瑞士十字
多点线正弦抛物线
矩形网格 三角形网格 马赛克
扑克牌花色形状

## 工具说明

#### 圆扇形
此工具用于创建圆弧。拖动鼠标可创建圆弧（但不包括圆弧部分）。按住 Ctrl 键可将扇形限制为半圆。按住 Shift 键可将扇形限制为象限或半圆；按住 Alt 键可将初始半径从垂直方向更改为水平方向。
启用一个数据输入字段：这是积分数，其值限制在 4 到 72 之间（含 4 和 72）。

#### 椭圆形
生成椭圆。按住 Ctrl 键可强制点的曲率设置为“圆形”（否则，曲率会根据椭圆形状自动调整——从一条直线（其中一个维度非常小）逐渐接近圆形）。按住 Shift 键可使点到中心的距离相等。同时按下 Ctrl+Shift 键可生成圆形。
启用一个数据输入字段：用于输入分数，数值范围为 4 到 72（含 4 和 72）。如果所选分数不能被 4 整除，则输入值将向下取整到最接近的 4 的倍数。

#### 圆角矩形
已启用一个数据输入字段：构成拐角的半圆半径与最短边长度的比值。该值限制在 0.01 到 0.4 之间。
有一个复选框可以使拐角更平滑（会创建额外的点）。

#### 骨骼影响形状
这类似于圆角矩形，但短边上有半圆形。
创作风格可通过按钮选择，按下按钮后，即可在各种选项之间循环切换：
>> 使用鼠标点击并拖动创建的边界框来定义形状。形状将水平或垂直对齐，尺寸将根据边界框设置。
>> 使用鼠标拖动来定义创建形状的向量。在这种情况下，“末端半圆的半径”需要手动输入。

#### 环
创建一个由两个同心椭圆组成的单一形状。按 Shift 键创建同心圆。
已启用一个数据输入字段：中心宽度与外半径之比；其取值范围为 0.001 至 0.9950（含 0.001 和 0.9950）。（数值过大会在中心形成较大的孔洞）

#### 同心多边形
创建同心多边形：每个多边形都是一个独立的形状，最大的多边形位于底部。可设置圆角（默认为尖角）。
启用了两个数据输入字段：每个多边形的边数（介于 3 到 24 之间，含 3 和 24）和同心图形的数量（介于 1 到 24 之间，含 1 和 24）。

#### 多边形
启用一个数据输入字段：边数，取值范围为 3 到 24（含 3 和 24）。

#### 三/四边形扭曲网格
启用两个数据输入字段：一是“网”上的辐条数量，取值范围为 3 到 48（含 3 和 48）；二是同心圆环的数量，取值范围为 1 到 24（含 1 和 24）。最内层的多边形被细分为三角形；每个后续的外层多边形均由四边形组成。

#### 直角三角形
这将生成一个直角三角形。未启用任何数据输入字段。

#### 星星
创建一个具有指定臂数的星形。按住 Ctrl 键可使角变圆（否则角会变尖）。
启用两个数据输入字段：分别是星形的臂数和星体中心宽度与总半径之比。星形臂数可在 3 到 72 之间（含 3 和 72）；中心宽度与总半径之比可在 0.001 到 0.9950 之间（含 0.001 和 0.9950）。

#### 瑞士十字
创建瑞士十字。按住 Ctrl 键可将顶点变为圆角（否则为直角）。
已启用一个数据输入字段：十字架臂的宽度与最短边的比值。该值介于 0.01 和 0.99 之间（含 0.01 和 0.99）。

#### 多点线
主要有两种操作模式：
>> 生成一条直线，直线上均匀分布着若干点。
>> 生成多行。

按住 Shift 键可使线条水平，同时按住 Alt 键可使线条垂直。按住 Ctrl 键可使点呈圆角，否则点呈尖角。
始终启用两个数据输入字段：
>> 每条线上的点数——该值限制在 2 到 72 之间（含 2 和 72）。
>> 要画多少条线

如果需要绘制多条线，有一个按钮可以循环切换选项，共有两个选项：
>> 创建多条平行线——在这种情况下，您可以手动设置间距；或者，选中“基于笔触宽度”复选框，系统会自动设置间距，使线条紧密排列，以便使用标准画笔填充间隙。此自动设置还可以进一步手动调整。
>> 创建径向线——此时会启用一个数据输入字段——该字段定义了从原点到最内点的距离，该距离是线长的比率，且取值范围为 0 到 0.990。请注意，如果此选项设置得非常小，则会在相同（或非常接近）的位置创建多个点，这可能会使选择特定线的原点变得困难。

#### 正弦
正弦波工具会生成一条曲线，该曲线由指定数量的点构成，形成选定的半周期数，峰峰值振幅由缩放因子设定。拖动“终点”可将曲线从零延伸至选定的周期数，直至生成完整曲线，然后拉伸曲线。按住 Control 键可限制曲线，如果点数不足以保持曲线形状（半周期需要 12 个点），则减少绘制的周期数。按住 Alt 键可反转曲线。按住 Shift 键可保持零振幅线水平。
启用了三个数据输入字段：绘制曲线中的点数（6 到 144，含 6 和 144）、最大循环数（1 到 12）以及曲线相对于默认帧大小的峰峰值大小（振幅）（0.001 到 10，含 0.001 和 10）。

#### 抛物线
这将生成一条沿 x 轴均匀分布的抛物线。按住 Shift 键可将抛物线的端点水平对齐。默认情况下，曲线的顶点与端点位于同一象限，但按住 Alt 键可反转顶点。按住 Control 键可使抛物线的顶点保持尖锐，否则保持圆角。
启用了两个数据输入字段：点数（限制在 3 到 72 之间，含 3 和 72）和曲率（0.001 到 10，含 0.001 和 10）——数值越小，曲线越平缓。

#### 网格
创建指定行数和列数的网格。
启用了两个数据输入字段：行数和列数。两者的值均限制在 1 到 48 之间（含 1 和 48）。
有一个选项按钮，用于选择填充类型。点击该按钮可在选项之间循环切换。共有两个选项：
>> 只需创建一个形状用于网格线，再创建一个形状用于背景填充（如果已设置相关的自动描边/自动填充选项）
>> 为每个单元格创建单独的形状

#### 三角形网格
选项按钮用于选择三角形网格的样式。单击该按钮可在选项之间循环切换。共有三种网格样式：
>> 基于六边形的网格 - 启用两个数据输入字段：行数和每行三角形数。行数限制为 1 到 48（含 1 和 48）；每行三角形数限制为 2 到 48（含 2 和 48）。这将生成一个由相同三角形组成的“不规则边缘”网格。
>> 基于正方形且对角线交替的网格
>> 基于具有相同对角线的正方形的网格

最后两个选项启用了两个数据输入字段：行数和每行方格数。这两个字段的值都限制在 1 到 48 之间（含 1 和 48）。

#### 马赛克
此工具可创建指定行数和列数的马赛克图案。这与网格不同，因为每个单元格都是一条独立的路径（曲线）——点之间互不共享。
启用了两个数据输入字段：行数和列数。两者的值均限制在 1 到 24 之间（含 1 和 24）。
网格在鼠标按下时创建，但形状的描边/填充在鼠标抬起时应用。

#### 扑克牌花色形状
这会抽到梅花、方块、红心或黑桃。
选项按钮用于选择所需的形状。单击该按钮可在选项之间循环切换。
有一个复选框，用于使用花色常用的填充/描边（红色填充代表方块/红心，黑色填充代表梅花/黑桃）。
对于球杆来说，有一个“圆润度”值，用于调整整体形状：
0 表示分布最分散，10 表示分布最紧凑。
对于钻石而言，有一个“曲率”值，用于调整边缘的直线度：
-- 0 为直线，10 为最大曲率。
红桃和黑桃有一种“圆润度”，可以调整整体形状：
0 代表“尖锐”，10 代表最圆润。

## 注释和已知问题
“安装脚本”流程尚未在 Mac 上进行测试。
不支持本地化。
如果使用不一致的选项创建形状，就会出现一些“有趣的”行为。例如，如果用少量点强制弯曲（按住 Ctrl 键）绘制椭圆，就会形成类似骨骼的形状；如果以（接近）1 的外半径与内半径之比创建星形，就会形成多边形；如果用少量点创建正弦曲线，就会形成一些奇怪的环状；边数超过 20 的多边形几乎与椭圆/圆形无法区分。
目前没有已知问题；但如果您发现任何错误、不一致之处、不友好的用户界面等，请告知我。
我们随时欢迎您提出修改意见。请尽管提出。如果很简单，我们会很快完成。如果很困难……嗯，我们会把它列入待办事项清单。

## 该工具的下一个版本
计划在下一版本中进行以下更改：
>>>（跨越多个版本）将子工具迁移到单独的 .lua 文件中
>>> 为用户编写的子工具提供更多支持
>>> 如有需要，可提供其他功能
>>> 已报告或已解决的错误修复