## 简介

`AE_2DJoystick` 适合用于制作**头部转面**（Head Turns）或**眼球运动**等需要 X/Y 轴联合控制的动画。通过拖拽屏幕上的方块，你可以直观地混合两个动作，而无需在时间轴上分别调整两个骨骼的角度。

## 功能

- **可视化控制**：在编辑视图中直接绘制操纵杆 UI，无需离开画布即可调整动画。
- **双轴联动**：
  - **水平轴**：控制一个智能骨骼动作（通常用于左右转头）。
  - **垂直轴：控制另一个智能骨骼动作（通常用于上下抬头）。
- **智能动作识别**：脚本会自动识别标准的智能骨骼命名规范（如 `Action` 和 `Action 2`），自动匹配正负方向的动作。
- **多操纵杆支持**：可以在同一个骨骼层上创建多个不同的操纵杆（例如一个控制头，一个控制眼睛），并通过下拉菜单切换。
- **高度可配置**：
  - 支持反转控制方向（Flip Actions）。
  - 支持调整操纵杆在屏幕上的位置和大小。
- **数据持久化**：操纵杆的配置数据保存在图层的 `ScriptData` 中，随文件保存，下次打开依然存在。

## 使用方法

### 创建操纵杆

1. 选中一个**骨骼图层**（该工具仅在骨骼层激活）。
2. 在工具栏选择 **2D Joystick** 工具。
3. 点击上方工具面板的 **`+`** 按钮。
4. 输入操纵杆名称（例如 "HeadControl"）并确认。
   - *提示：如果在创建前已经选中了两个骨骼，脚本会尝试自动将它们分配给 H 和 V 轴*。

### 配置映射

在工具属性栏中设置当前选中的操纵杆：

- **Select joystick**: 选择要编辑的操纵杆。
- **H-Smartbone**: 选择用于水平控制的动作名称。
- **V-Smartbone**: 选择用于垂直控制的动作名称。
- **Flip directions**: 如果拖拽方向与动画反应相反，勾选此项进行反转。

### 调整 UI 布局

1. 点击工具栏上的 **移动/编辑图标**。
2. 进入编辑模式后：
   - **移动**：拖拽操纵杆方框的**中心**区域，可以将其移动到屏幕任意位置。
   - **缩放**：拖拽操纵杆方框的**边缘或角落**，可以调整控件的大小。
3. 再次点击图标退出编辑模式。

### 制作动画

1. 确保未处于编辑模式（UI 为常规颜色）。
2. 在时间轴上选择一帧。
3. 鼠标左键在操纵杆方框内**拖拽小白点**。
4. 脚本会根据小白点的位置，自动计算并设置对应两个骨骼的角度关键帧。

## 技术细节

- **动作匹配逻辑**：脚本通过查找后缀为 `" 2"` 的动作来确定双向智能骨骼。例如，如果你选择了名为 `HeadTurn` 的动作，脚本会自动查找并关联 `HeadTurn 2` 以实现完整的左右（或上下）控制。
- **关键帧生成**：脚本通过 `percent`（百分比）计算目标角度。如果不处于第 0 帧，操作将生成关键帧；如果在第 0 帧，则修改初始状态。

