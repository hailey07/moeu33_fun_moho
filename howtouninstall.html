<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="å®Œå…¨å¸è½½ Moho åŠé‡è£…">
    <meta name="keywords" content="moeu33, èŒé…¥33, Mohoè„šæœ¬, moho script, åŠ¨ç”»åˆ¶ä½œ, moho animation, moho, moho pro, åŠ¨ç”»è„šæœ¬, Mohoå·¥å…·, åŠ¨ç”»èµ„æº, è„šæœ¬æ•™ç¨‹, Mohoç¤¾åŒº, åŠ¨ç”»å·¥ä½œæµç¨‹, Mohoè„šæœ¬ä¸‹è½½, Lua è„šæœ¬, åŠ¨ç”»å·¥ä½œå®¤, æ–‡æ¡£, å›¾å½¢, è„šæœ¬, çŸ¢é‡">
    <meta name="color-scheme" content="light dark">
    <meta name="supported-color-schemes" content="light dark">
    <title>å®Œå…¨å¸è½½ Moho åŠé‡è£…</title>
    <base href="/">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://at.alicdn.com/t/c/font_5109131_wfhaps8fl5.css">
    <link rel="icon" href="assets/Favicon.png" type="image/png">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body>
    <div class="detail-container">

        <div class="breadcrumb">
            <div class="detail-topbar">
                <span class="home-icon" href="index"
                    style="display:inline-flex; align-items:center; vertical-align:middle; width:30px;">
                    <img src="assets/Favicon.png" alt="Home" class="breadcrumb-home-icon">
                </span>
                <a href="index" class="gobackhome">è¿”å›é¦–é¡µ</a>ï½œ
                <span id="bread-name">å®Œå…¨å¸è½½ Moho åŠé‡è£…</span>

            </div>
            <button id="theme-toggle" class="theme-toggle-btn" onclick="toggleTheme()" title="åˆ‡æ¢æ—¥å¤œæ¨¡å¼"></button>
        </div>
        <div id="content" style="max-width:80%; margin:auto;">
            <div class="detail-header">
                <div class="detail-icon">
                    <img src="assets/uninstall.png">
                </div>
                <div class="detail-title">å®Œå…¨å¸è½½ Moho åŠé‡è£…</div>
            </div>
            <div class="article-layout">
                <div class="content-area" id="article-content">
                    <img src="assets/loading.gif" alt="Loading..."
                        style="width: 150px; height: 150px; margin: 10px; display:flex; align-items:center;justify-content: center;border: none;box-shadow: none;">
                </div>
                <aside class="toc-container">
                    <div class="toc-sticky-box">
                        <h3 class="toc-title">
                            <span class="iconfont icon-liebiao1"></span> ç›®å½•
                        </h3>
                        <div id="toc-list"></div>
                        <div id="toc-list"></div>
                    </div>
                </aside>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // æŒ‡å®š Markdown æ–‡ä»¶è·¯å¾„
            const mdFile = 'otherdocs/uninstall.md';

            fetch(mdFile)
                .then(res => {
                    if (!res.ok) throw new Error("æ— æ³•è¯»å–æ–‡ä»¶");
                    return res.text();
                })
                .then(text => {
                    const contentDiv = document.getElementById('article-content');
                    // 1. æ¸²æŸ“ Markdown
                    contentDiv.innerHTML = marked.parse(text);

                    // 2. ç”Ÿæˆç›®å½•
                    generateTOC();

                    // 3. ã€æ–°å¢ã€‘å¤„ç†è§†é¢‘å’Œå¼€å¯ç”»å»Šæ¨¡å¼
                    convertImagesToVideos();
                    setupImageLightbox();
                })
                .catch(err => {
                    console.error(err);
                    document.getElementById('article-content').innerHTML =
                        `<h3 style="color:red; text-align:center;">ğŸ˜¢ åŠ è½½æ•™ç¨‹å¤±è´¥ï¼Œè¯·æ£€æŸ¥ docs/install.md æ˜¯å¦å­˜åœ¨ã€‚</h3>`;
                });
        });

        // --- è‡ªåŠ¨ç”Ÿæˆç›®å½•å‡½æ•° ---
        function generateTOC() {
            const content = document.getElementById('article-content');
            const tocContainer = document.querySelector('.toc-container');
            const tocList = document.getElementById('toc-list');

            const headers = content.querySelectorAll('h1, h2, h3, h4, h5, h6');

            if (headers.length === 0) {
                tocContainer.style.display = 'none';
                return;
            }

            tocContainer.style.display = 'block';
            tocList.innerHTML = '';

            headers.forEach((header, index) => {
                if (!header.id) {
                    header.id = 'heading-' + index;
                }
                const link = document.createElement('a');
                link.href = '#' + header.id;
                link.textContent = header.textContent;
                link.className = 'toc-link toc-' + header.tagName.toLowerCase();
                link.onclick = (e) => {
                    e.preventDefault();
                    header.scrollIntoView({
                        behavior: 'smooth'
                    });
                };
                tocList.appendChild(link);
            });
        }

        // --- ã€æ–°å¢ã€‘å°†æŒ‡å‘è§†é¢‘çš„ img æ ‡ç­¾è½¬æ¢ä¸º video æ ‡ç­¾ ---
        function convertImagesToVideos() {
            // æ³¨æ„ï¼šè¿™é‡Œæ”¹ä¸ºè·å– article-content
            const content = document.getElementById('article-content');
            if (!content) return;
            
            const images = content.querySelectorAll('img');
            images.forEach(img => {
                const src = img.getAttribute('src');
                if (!src) return;
                // æ£€æŸ¥åç¼€å (æ”¯æŒ mp4, webm, mov, ogg)
                if (src.match(/\.(mp4|webm|mov|ogg)$/i)) {
                    const video = document.createElement('video');
                    video.src = src;
                    video.controls = true;
                    video.preload = "metadata";
                    if (img.alt) video.title = img.alt;
                    video.style.maxWidth = '100%';
                    video.style.display = 'block';
                    video.style.margin = '20px auto';
                    img.parentNode.replaceChild(video, img);
                }
            });
        }

        // --- ã€æ–°å¢ã€‘å›¾ç‰‡ç‚¹å‡»æ”¾å¤§åŠŸèƒ½ (ç”»å»Šæ¨¡å¼) ---
        function setupImageLightbox() {
            // æ³¨æ„ï¼šè¿™é‡Œæ”¹ä¸ºè·å– article-content
            const content = document.getElementById('article-content');
            if (!content) return;

            // ç­›é€‰å‡ºæ‰€æœ‰æœ‰æ•ˆçš„å›¾ç‰‡
            const images = Array.from(content.querySelectorAll('img')).filter(img =>
                !img.src.includes('loading.gif') && !img.src.includes('not_found.gif')
            );

            images.forEach((img, index) => {
                img.style.cursor = 'zoom-in';

                if (img.parentNode.tagName === 'A') {
                    img.parentNode.onclick = (e) => e.preventDefault();
                }

                img.onclick = (e) => {
                    e.stopPropagation();
                    openGallery(images, index);
                };
            });
        }

        // --- ã€æ–°å¢ã€‘å¼€å¯ç”»å»Šé®ç½©å±‚ (é€»è¾‘ä¸ detail.html ä¿æŒä¸€è‡´) ---
        function openGallery(images, startIndex) {
            let currentIndex = startIndex;

            // 1. åˆ›å»ºé®ç½©å±‚
            const overlay = document.createElement('div');
            overlay.id = 'gallery-overlay';
            Object.assign(overlay.style, {
                position: 'fixed',
                top: '0',
                left: '0',
                width: '100vw',
                height: '100vh',
                backgroundColor: 'rgba(0,0,0,0.9)',
                zIndex: '9999',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                userSelect: 'none'
            });

            // 2. åˆ›å»ºå›¾ç‰‡å®¹å™¨
            const imgEl = document.createElement('img');
            Object.assign(imgEl.style, {
                maxWidth: '90%',
                maxHeight: '85%',
                objectFit: 'contain',
                borderRadius: '4px',
                boxShadow: '0 0 20px rgba(0,0,0,0.8)',
                transition: 'transform 0.2s ease'
            });

            // 3. åˆ›å»ºæ§åˆ¶æŒ‰é’®
            const createBtn = (html, styleObj, onClick) => {
                const btn = document.createElement('div');
                btn.innerHTML = html;
                Object.assign(btn.style, {
                    position: 'absolute',
                    color: '#fff',
                    cursor: 'pointer',
                    fontSize: '40px',
                    padding: '20px',
                    opacity: '0.6',
                    transition: 'opacity 0.2s',
                    ...styleObj
                });
                btn.onmouseenter = () => btn.style.opacity = '1';
                btn.onmouseleave = () => btn.style.opacity = '0.6';
                btn.onclick = (e) => {
                    e.stopPropagation();
                    onClick();
                };
                return btn;
            };

            const counter = document.createElement('div');
            Object.assign(counter.style, {
                position: 'absolute',
                bottom: '20px',
                left: '50%',
                transform: 'translateX(-50%)',
                color: '#ccc',
                fontSize: '16px',
                fontFamily: 'Arial'
            });

            const updateImage = () => {
                imgEl.src = images[currentIndex].src;
                counter.textContent = `${currentIndex + 1} / ${images.length}`;
                if (images[currentIndex + 1]) (new Image()).src = images[currentIndex + 1].src;
                if (images[currentIndex - 1]) (new Image()).src = images[currentIndex - 1].src;
            };

            const nextImg = () => {
                if (currentIndex < images.length - 1) {
                    currentIndex++;
                    updateImage();
                }
            };
            const prevImg = () => {
                if (currentIndex > 0) {
                    currentIndex--;
                    updateImage();
                }
            };
            const closeGallery = () => {
                document.body.removeChild(overlay);
                document.body.style.overflow = 'auto';
                document.removeEventListener('keydown', keyHandler);
            };

            const closeBtn = createBtn('Ã—', { top: '10px', right: '20px', fontSize: '50px' }, closeGallery);
            const prevBtn = createBtn('â®', { left: '20px', top: '50%', transform: 'translateY(-50%)' }, prevImg);
            const nextBtn = createBtn('â¯', { right: '20px', top: '50%', transform: 'translateY(-50%)' }, nextImg);

            overlay.append(imgEl, closeBtn, counter);
            if (images.length > 1) {
                overlay.append(prevBtn, nextBtn);
            }

            overlay.onclick = closeGallery;
            imgEl.onclick = (e) => e.stopPropagation();

            const keyHandler = (e) => {
                if (e.key === 'Escape') closeGallery();
                if (e.key === 'ArrowRight') nextImg();
                if (e.key === 'ArrowLeft') prevImg();
            };
            document.addEventListener('keydown', keyHandler);

            updateImage();
            document.body.appendChild(overlay);
            document.body.style.overflow = 'hidden';
        }
    </script>
    <script src="https://at.alicdn.com/t/c/font_5109131_e8j9zarzsw.js"></script>
    <script src="script.js"></script>
</body>
<div id="copyright" class="cr-text">
        Â©ï¸ 2026 by MoeU33
    </div>
</html>